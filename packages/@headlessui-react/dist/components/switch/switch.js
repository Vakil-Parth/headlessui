import{Fragment as F,createContext as B,useContext as I,useMemo as L,useRef as O,useState as W}from"react";import{forwardRefWithAs as j,render as A,compact as N}from'../../utils/render.js';import{useId as $}from'../../hooks/use-id.js';import{Keys as H}from'../keyboard.js';import{isDisabledReactIssue7711 as q}from'../../utils/bugs.js';import{Label as z,useLabels as J}from'../label/label.js';import{Description as Q,useDescriptions as V}from'../description/description.js';import{useResolveButtonType as X}from'../../hooks/use-resolve-button-type.js';import{useSyncRefs as Y}from'../../hooks/use-sync-refs.js';import{Hidden as Z,Features as ee}from'../../internal/hidden.js';import{attemptSubmit as te}from'../../utils/form.js';import{useEvent as S}from'../../hooks/use-event.js';import{useControllable as re}from'../../hooks/use-controllable.js';let k=B(null);k.displayName="GroupContext";let ne=F;function le(g){let[t,l]=W(null),[o,E]=J(),[i,T]=V(),w=L(()=>({switch:t,setSwitch:l,labelledby:o,describedby:i}),[t,l,o,i]),P={},v=g;return<T name="Switch.Description"><E name="Switch.Label"props={{onClick(){!t||(t.click(),t.focus({preventScroll:!0}))}}}><k.Provider value={w}>{A({ourProps:P,theirProps:v,defaultTag:ne,name:"Switch.Group"})}</k.Provider></E></T>}let oe="button",ie=j(function(t,l){let{checked:o,defaultChecked:E=!1,onChange:i,name:T,value:w,...P}=t,v=`headlessui-switch-${$()}`,r=I(k),C=O(null),G=Y(C,l,r===null?null:r.setSwitch),[n,R]=re(o,i,E),D=S(()=>R==null?void 0:R(!n)),K=S(e=>{if(q(e.currentTarget))return e.preventDefault();e.preventDefault(),D()}),M=S(e=>{e.key===H.Space?(e.preventDefault(),D()):e.key===H.Enter&&te(e.currentTarget)}),x=S(e=>e.preventDefault()),U=L(()=>({checked:n}),[n]),_={id:v,ref:G,role:"switch",type:X(t,C),tabIndex:0,"aria-checked":n,"aria-labelledby":r==null?void 0:r.labelledby,"aria-describedby":r==null?void 0:r.describedby,onClick:K,onKeyUp:M,onKeyPress:x};return<>{T!=null&&n&&<Z features={ee.Hidden}{...N({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:n,name:T,value:w})}/>}{A({ourProps:_,theirProps:P,slot:U,defaultTag:oe,name:"Switch"})}</>}),Ce=Object.assign(ie,{Group:le,Label:z,Description:Q});export{Ce as Switch};
